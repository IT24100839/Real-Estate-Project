<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Available Properties</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the background image and general body styling */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter font */
            color: #333; /* Default text color */
            background-image: url('https://images.pexels.com/photos/186077/pexels-photo-186077.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2');
            background-size: cover; /* Cover the entire background */
            background-repeat: no-repeat; /* Do not repeat the image */
            background-attachment: fixed; /* Fix the background image position */
        }
        /* Add a semi-transparent overlay to improve readability of content over the background image */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4); /* Adjust opacity as needed (0.4 is slightly darker than 0.3) */
            z-index: -1; /* Place the overlay behind the content */
        }
    </style>
</head>
<body class="p-6">

<div class="container mx-auto bg-white p-8 rounded-lg shadow-lg bg-opacity-90">
    <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">Available Properties</h1>

    <div class="flex items-center justify-center mb-6 space-x-4">
        <span class="text-gray-700 font-semibold">Sort by:</span>
        <a th:href="@{/properties(sort='price_asc')}"
           class="text-blue-600 hover:text-blue-800 transition duration-300 ease-in-out">Price (Low to High)</a>
        <a th:href="@{/properties(sort='price_desc')}"
           class="text-blue-600 hover:text-blue-800 transition duration-300 ease-in-out">Price (High to Low)</a>
        <a th:href="@{/properties}"
           class="text-blue-600 hover:text-blue-800 transition duration-300 ease-in-out">Default (ID)</a>
    </div>

    <div class="text-center mb-8">
        <a th:href="@{/properties/new}"
           class="inline-block bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 ease-in-out">
            Add New Property
        </a>
    </div>

    <div th:if="${#lists.isEmpty(properties)}" class="text-center text-gray-600 text-xl mt-10">
        No properties found.
    </div>

    <div th:unless="${#lists.isEmpty(properties)}" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div th:each="property : ${properties}" class="bg-gray-100 rounded-lg shadow-md overflow-hidden">
            <img th:src="${property.imagePath ?: 'https://placehold.co/400x250?text=No+Image'}"
                 alt="Property Image" class="w-full h-48 object-cover">

            <div class="p-4">
                <h2 class="text-xl font-semibold text-gray-800 mb-2" th:text="${property.title}">Property Title</h2>

                <p class="text-lg text-green-600 font-bold mb-2" th:text="${'$' + property.price}">$1,000,000</p>

                <p class="text-gray-600 text-sm mb-3" th:text="${property.location}">Location, City, Country</p>

                <p class="text-gray-700 text-base mb-4" th:text="${property.shortDescription}">A brief description of the property.</p>

                <a th:href="@{/properties/{id}(id=${property.id})}"
                   class="inline-block bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300 ease-in-out text-sm">
                    View Details
                </a>
            </div>
        </div>
    </div>

    <div class="text-center mt-8">
        <a th:href="@{/}"
           class="inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800 transition duration-300 ease-in-out">
            Back to Home
        </a>
    </div>

</div>

</body>
</html>
